# 52.Git 工作流规范參考.52
## <a name="index"></a> 目录
- [引子](#start)
- [介绍](#style)
- [什么是成功的 Git 工作流](#what)
- [Git 工作流](#git)
- [GitHub 工作流](#github)
- [GitLab 工作流](#gitlab)
- [规范参考](#standard)
  - [问题12](#link)
- [参考资料](#reference)


## <a name="start"></a> 引子
本以为使用 Git 的工作流规范依据很普遍了，发现事实并不是那样。找了些资料，结合实际的工作情况，进行了整合。

## <a name="intro"></a> 介绍
Git 工作流是一个如何使用 Git 以一致和高效的方式来完成工作的建议。在 Git 管理的项目中与团队合作时，确保团队对如何应用工作流达成一致意见是很重要的。在看下面介绍的内容时，请记住，这些工作流是一个指导原则，而不是具体的规则。可以根据自身实际情况进行相应调整。


## <a name="what"></a> 什么是成功的 Git 工作流
当评估团队工作流时，考虑团队的文化是最重要的一件事。你希望工作流提高团队的效率，而不是成为限制生产力的负担。当评估时需要考虑的事情：
- 此工作流是否随团队规模而扩展？
- 此工作流是否可以轻松撤消失误和错误？
- 此工作流是否会给团队带来任何新的不必要的认知开销？

下面就来介绍一下集中常见的 Git 工作流。

## <a name="git"></a> Git 工作流
Git 工作流是最早推荐使用 Git 分支的工作流之一，它受到了很多关注。原文见 [A successful Git branching model][url-reference-4]。文中主要是讲的是分支策略和发布管理，下面是整体示意图。

![52-git-modal][url-local-1]

### 分散但集中
使用和良好配合这个分支模型的的库是一个“真正”的主库。注意这个库只是被认为是一个主库（由于 Git 是一个分布式版本控制系统，在技术上并没有这样的一个处于中心的库）。我们将这个库称为 origin，因为这个名称对所有 Git 用户都很熟悉。

每个开发者拉取并推送到 origin 。但是除了集中的推送-拉取关系之外，每个开发人员还可以从其他对等方拉取更改来组成子团队。例如，在过早的把进行中的工作推送到 origin 之前，这将有助于多个开发者共同合作开发一个大的新功能。在下面的图示中，就拥有 Alice and Bob、 Alice and David 和 Clair and David 子团队。

![52-centr-decentr][url-local-2]

### 主分支
主库有两个一直存在的主要分支：
-  master
-  develop

在 origin 的 master 分支，对于每一个 Git 用户来说应该是熟悉的。跟 master 分支平行的另外一个分支称为 develop 。

我们认为 origin/master 分支将作为总是处于一个生成就绪状态的主分支。

我们认为 origin/develop 分支将作为总是处于下一个版本中最新开发变更状态的主分支。有些人称为为“集成分支”，这是所有自动夜间构建的来源。

当在 develop 分支的源码达到一个稳定点并准备发布时，所有的变动应该以某种方式合并回 master 分支，只有添加一个发布数字标签。详细的该如何做，后面将会详细讨论。

因此，每次更改合并回主版本时，根据定义，这是一个新的生产版本。我们在这方面往往非常严格，因此理论上，我们可以使用 Git hook 脚本，在每次 master 上有提交时，自动构建并将其部署到生产环境的服务器上。

### 辅助分支
紧接着主分支的，我们的开发模式使用一系列辅助分支，用来帮助团队成员之间并行开发，简化跟踪功能，为产品发布做好准备，并快速修复实际生产问题。跟主分支不同的是，这些分支总是有一个有限的生命周期，因为它们最后都将会被删除。

我们可能使用到的不同类型分支：
- Feature branches
- Release branches
- Hotfix branches

每一个分支都有一个明确的目的，并有严格的规则规定那个分支是它们的源分支，那个分支是它们合并的目标分支。线面就分别进行介绍。

#### Feature branches
可能源分支 必须合并回分支 分支命名约定



## <a name="github"></a> GitHub 工作流

## <a name="gitlab"></a> GitLab 工作流

## <a name="standard"></a> 规范参考


<div align="right"><a href="#index">Back to top :arrow_up:</a></div>

## <a name="reference"></a> 参考资料
- [A successful Git branching model][url-reference-4]
- [GitHub flow][url-article-1]
- [GitLab Flow][url-article-2]
- [Comparing Workflows][url-article-3]

[url-base]:https://xxholic.github.io/blog/draft

[url-article-1]:https://guides.github.com/introduction/flow/index.html
[url-article-2]:https://docs.gitlab.com/ee/topics/gitlab_flow.html
[url-article-3]:https://www.atlassian.com/git/tutorials/comparing-workflows
[url-article-4]:https://nvie.com/posts/a-successful-git-branching-model/

[url-local-1]:./images/52/git-model.png
[url-local-2]:./images/52/centr-decentr.png

<details>
<summary>:wastebasket:</summary>


最近在看[《黑暗的左手》][url-book]，里面关于性的设定很有意思，在书中描述的星球上，是没有性别区分的。下面是书中部分摘录。



![49-poster][url-local-poster]

</details>

[url-book]:https://book.douban.com/subject/26916012/
[url-local-poster]:./images/49/poster.jpg
