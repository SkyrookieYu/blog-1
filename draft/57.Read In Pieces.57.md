# template
## <a name="index"></a> 目录
- [引子](#start)
- [问题1](#style)
  - [问题12](#link)
- [参考资料](#reference)


## <a name="start"></a> 引子
在比较早的时候，看过一个 h5 的展示页面，里面的效果让我感觉很惊艳，最近又想起这个事情，于是找到原项目[In Pieces][url-github-1]，可以下载到本地直接在浏览器查看。在线展示网址见[这里][url-demo-1]。在没看原作者解释之前，本以为主要是用 JavaScript 实现的。事实证明 CSS 能做到的事情比预想多的多。

虽然知道了实现的主要原理，但看别人做的是一回事，自己做是另外一回事，自己选择其中的一个动物效果尝试复现出来，期间的一些体会在此总结一下。

## 原理
主要使用了下面的属性：
```css
-webkit-clip-path: polygon( 40% 40%, 50% 60%, 60% 40% );
```
[clip-path][url-mdn-1] 属性可以创建一个剪辑区域，区域可是自定义多变形。目前支持情况见[Can I use clip-path][url-support-1] 。

图案都是通过一组坐标进行绘制、变形和移动。

![57-polygon-demo][url-local-1]

## 绘制
根据原理得知都是通过坐标点绘制，那么在一个图案设计出来后，处理的方式有：

1. 人工计算距离百分比，手动在设计图上标识出来。可行但过于消耗精力。
2. 利用鼠标点击的位置信息，使用程序动态计算出距离。 这是[示例][url-lab-1]。

在使用第二种方式在绘制过程中，发现无可避免的需要进行微调。因此有下面一些体会：
- 将每块三角形进行数字标记，html 标签的类名携带数字与标签数字对应。
- 每一个三角形的坐标点，统一使用相同的书写方式。例如以最考上的点作为第一个坐标，然后顺时针书写其它点坐标。

![57-mark-demo][url-local-2]

按照上面的方式约定后，在后期微调的时候，会很方便的进行定位。

## 层级
在上面的示例中，可以发现有些地方存在交叉覆盖。处理的方式有：
1. 使用 z-index 进行区分，重叠不多的图案的确可行，重叠区域较多时，会比较花时间。
2. 事先规划好写图形的顺序，利用同层级后面覆盖前面层级元素的默认特性。

## 闪烁
仔细看时，会发现图案会有闪烁的效果，而且是种有序的闪烁感。起初以为使用 CSS 的 keyframes 动画改变一下透明度。

尝试之后，发现自己错了，实际上每个标签的大小都是一样，[clip-path][url-mdn-1] 的坐标不一样而已。如果只是在原标签上单纯的使用 keyframes，透明度的变化效果很不好。查看源代码后，发现实现的关键有：
- 统一在相同的伪元素上添加动画效果。
- 闪烁是改变伪元素的背景颜色。
- 动画 transition 按照一定的间隔设置延迟的时间。

## 动作
最后在尝试添加一些模拟动作的动画时，发现一些问题:
- 完全按照前面定位的坐标点，transition 的补间动画覆盖不到，出现明显的空隙。
- 当很多三角形公用一个坐标点时，有动一发牵全身的效果，需要小心的进行调整。


<div align="right"><a href="#index">Back to top :arrow_up:</a></div>

## <a name="reference"></a> 参考资料
- [In Pieces][url-github-1]
- [汉化 In Pieces][url-github-2]
- [clipping-paths][url-standard-1]
- [Purecss Francine][url-github-3]



[url-github-1]:https://github.com/bryanjamesinteractive/in-pieces
[url-github-2]:https://github.com/keginx/species-in-pieces
[url-github-3]:https://github.com/cyanharlow/purecss-francine
[url-demo-1]:http://species-in-pieces.com
[url-mdn-1]:https://developer.mozilla.org/en-US/docs/Web/CSS/clip-path
[url-standard-1]:https://www.w3.org/TR/2014/CR-css-masking-1-20140826/#clipping-paths
[url-support-1]:https://caniuse.com/#search=clip-path

[url-lab-1]:https://xxholic.github.io/lab/blog/57/get-point.html

[url-local-1]:./images/57/polygon-demo.png
[url-local-2]:./images/57/mark-demo.png

<details>
<summary>:wastebasket:</summary>


最近在看[《黑暗的左手》][url-book]，里面关于性的设定很有意思，在书中描述的星球上，是没有性别区分的。下面是书中部分摘录。



![49-poster][url-local-poster]

</details>

[url-book]:https://book.douban.com/subject/26916012/
[url-local-poster]:./images/49/poster.jpg
