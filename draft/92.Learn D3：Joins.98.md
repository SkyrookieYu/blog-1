# 92.Learn D3：Joins.98

## <a name="start"></a> 引子
继 [Learn D3: Animation][url-pre] 第七篇，只是英文翻译，可修改代码的部分用静态图片替代了，想要实时交互请阅读原文。

- 原文：[Learn D3: Joins][url-1]
- 版本：Published Mar 24, 2020

## <a name="title1"></a> 正文
如果你熟悉此教程中的 D3 ，你可能会惊讶于 D3 选择器被提及的如此之少。

那是因为你可能不需要它们！

D3 选择器适用一个特殊的定位：快速，动态图形的增量更新。如果你关注的是静态图形，或者每帧都可以从头开始重新绘制的图形，那么你可能更喜欢不同的抽象。另一方面，如果你想要动画过渡或从现代浏览器中榨取最佳性能，选择器适合你。

（即使你决定不使用选择器，请记住 D 3还有大量其它有用的可视化工具。比例尺、形状、插值器、颜色、地图投影和许多其它功能可用于 Canvas、WebGL 或其它 DOM 抽象，如 Observable 的 HTML 标记模板文字、React 或 Svelte 。D3 还可以协助数据清理和分析，使用统计、分组和聚合、时间序列和解析的方法。）

本质上，D3 选择器指定的是*转换*而不是*表示*。你可以指定将当前状态转换为所需状态所需的更改（插入、更新和删除），而不是表示图形（DOM）的所需状态。这有时很乏味，但允许你设置过渡动画，并最小化对 DOM 的更改，从而提高性能。

让我们看看如何做。

假设我们想显示字母表中的字母。虽然不是很直观，但我们将保持简单，以专注于技术(有关实际的示例，请参见 [D3 图库][url-2] 的动画和交互部分。）

![92-1][url-local-1]

这个图形是静态的，因为它是在每次单元运行时从头开始创建的，这使得 D3 代码在本质上等同于 HTML 文本。

![92-2][url-local-2]

那么，何必要用选择器呢？对，对于静态图形，没有什么理由这样做。

但假设你想更新此图表以响应不断变化的数据。并且你不想从头开始重新绘制，希望应用最小的更新集来反映新数据。你希望重用现有元素，添加需要的元素，删除不需要的元素。只需将上述代码移动到一个在数据更改时调用的方法中，你就可以获得高性能的增量更新！😲

![92-3][url-local-3]

让我们把代码分析一下。

![92-4][url-local-4]

![92-5][url-local-5]

![92-6][url-local-6]
![92-7][url-local-7]


![92-8][url-local-8]
![92-9][url-local-9]


## 附录

![92-10][url-local-10]
![92-11][url-local-11]


## <a name="reference"></a> 参考资料
- [Learn D3: Animation][url-1]

[url-pre]:https://github.com/XXHolic/blog/issues/97
[url-1]:https://observablehq.com/@d3/learn-d3-joins?collection=@d3/learn-d3
[url-2]:https://observablehq.com/@d3/gallery


[url-3]:https://observablehq.com/collection/@d3/d3-interpolate
[url-4]:https://observablehq.com/@d3/d3-interpolate
[url-5]:https://github.com/d3/d3-transition/blob/master/README.md#transition_attrTween
[url-6]:https://github.com/d3/d3-transition/blob/master/README.md#transition_attr
[url-7]:https://github.com/d3/d3-transition/blob/master/README.md#transition_style
[url-8]:https://observablehq.com/@d3/d3-interpolatezoom
[url-9]:https://github.com/d3/d3-interpolate/blob/master/README.md#interpolate_gamma
[url-10]:https://observablehq.com/@mbostock/hello-flubber
[url-11]:https://observablehq.com/@mbostock/scrubber
[url-12]:https://observablehq.com/@observablehq/introduction-to-generators
[url-13]:https://github.com/d3/d3-transition/blob/master/README.md#transition_call
[url-14]:http://vis.berkeley.edu/papers/animated_transitions/



[url-local-1]:./images/92/1.png
[url-local-2]:./images/92/2.png
[url-local-3]:./images/92/3.png
[url-local-4]:./images/92/4.png
[url-local-5]:./images/92/5.png
[url-local-6]:./images/92/6.png
[url-local-7]:./images/92/7.png
[url-local-8]:./images/92/8.png
[url-local-9]:./images/92/9.png
[url-local-10]:./images/92/10.png
[url-local-11]:./images/92/11.png

<details>
<summary>:wastebasket:</summary>



</details>

[url-local-poster]:./images/92/poster.jpg
