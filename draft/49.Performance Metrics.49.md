# 49.Performance Metrics.49
## <a name="index"></a> 目录
- [引子](#start)
- [问题1](#style)
  - [问题12](#link)
- [参考资料](#reference)


## <a name="start"></a> 引子
在 [Performance Guide ][url-blog-48] 中提了解了以用户为中心的指导模型，下面看下在实际测量中的一些性能指标。原文 [User-centric performance metrics][url-artilce-1] 前段时间还在 Web Fundamentals 下，今天去看的时候变成了跳转外链，但[中文版][url-artilce-2]还在 Web Fundamentals 下。以下是个人理解的部分翻译。

翻译时 [User-centric performance metrics][url-artilce-1] 原文 Last updated: Nov 8, 2019 。

## <a name="reference"></a> 正文
我们都听过性能有多重要。但当我们谈到性能和让网站“快速”时，我们具体指的是什么？

事实上性能是相对的：
- 一个网站对于一个用户（在一个有强力设备的快速网络上）来说肯能是快速，但对于另外一个用户（子在一个低端设备的慢速网络上）来说是慢速。
- 两个网站可能在完全相同的时间内完成加载，但其中一个似乎加载的更快（如果它逐步加载内容，而不是等到最后才显示任何内容）。
- 一个网站可能看起来加载很快，但之后对于用户的交互响应慢（或者根本没有响应）

因此当谈到性能时，精确并可以量化的客观标准来对其进行衡量。这些标准称为度量标准。

但是，仅仅因为一个度量标准是基于客观标准，并且可以定量测量，这并不一定意味着这些测量是有用的。

## Defining metrics
在历史上，web 性能是通过 [load][url-mdn-1] 事件衡量。然而，尽管 [load][url-mdn-1] 在页面生命周期中，是一个定义良好的时刻，但这个时刻并不一定与用户关心的任何事情相对应。

例如，服务器可以用一个最小的页面来响应，该页面会立即触发 load 事件，但随后会异步获取页面中的所有内容并展示，这个过程可能是在 load 事件触发后好几秒。虽然这个页面在技术上拥有一个很快的加载时间，但这个时间与用户实际体验页面加载的方式不符。

在过去的几年，Chrome 团队的成员与 [W3C Web Performance Working Group][url-website-1] 合作，一直致力于标准化一组新的 API 和度量标准，它们更准确地衡量用户如何体验 Web 页面的性能。

为了帮助确保度量标准与用户相关，我们围绕几个关键问题对它们进行了界定：

问题 | 描述
:------------ | :-------------
Is it happening? | 导航是否成功启动？服务器响应了吗？
Is it useful? | 有足够的内容提供给用户使用吗？
Is it usable? | 用户可以跟页面交互吗，还是繁忙？
Is it delightful? | 交互是否顺畅自然，没有滞后和干扰？


## How metrics are measured
性能衡量标准通常有以下方式：
- 在实验室：使用工具在一致的受控环境中模拟页面加载
- 在现场：真实用户实际加载和与页面交互。

这两个选项都没有那一种一定比另一个更好或更差，事实上，您通常都想使用这两种方式，来确保良好的性能。

### In the lab（在实验室）
当开发新的功能，在实验室测试性能是有必要的。在产品发布新特性之前，不可能在实际用户身上测量它们的性能特性，因此在特性发布之前在实验室测试它们，是防止性能回归的最佳方法。

### In the field（在现场）
另一方面，虽然实验室测试性能是一个合理方式，但它不一定反映所有用户在野外如何体验你的站点。

根据用户的设备功能和他们的网络情况，站点性能可能会有很大的变化。用户是否（如何）与页面交互同样会造成影响。

此外，页面加载可能是不确定的。例如，加载个性化或广告的站点，用户之间可能会体验到截然不同的性能特性。实验室测试将不会捕捉到这些差异。

要真实的了解你的站点对于用户的表现如何，唯一的方法就是在用户加载和交互时测量它的性能。这种类型的测量通常称为 [Real user monitoring][url-wiki-1] ，简称 `RUM` 。

## Types of metrics
还有一些其他类型的度量标准与用户如何感知性能相关。
- Perceived load speed ：一个页面加载并将其所有可视元素呈现到屏幕的速度。
- Load responsiveness ：一个页面加载和执行任何必需的 JavaScript 代码的速度，以便组件快速响应用户交互
- Runtime responsiveness ：页面加载后，页面响应用户交互的速度。
- Visual stability ：页面上的元素是否以用户不期望的方式移动，并可能干扰他们的交互？
- Smoothness ：转换和动画是否以一致的帧速率进行渲染，并从一个状态流畅地转变到下一个状态？

从以上提供的几种类型的性能度量标准中，可以清晰的知道，没有单一的度量标准能够捕获页面所有的性能特征。

## Important metrics to measure

- First contentful paint (FCP) ：

<div align="right"><a href="#index">Back to top :arrow_up:</a></div>

## <a name="reference"></a> 参考资料
- [wiki Regular Expression][url-reference-1]

[url-base]:https://xxholic.github.io/blog/draft

[url-blog-48]:https://github.com/XXHolic/blog/issues/48



[url-artilce-1]:https://web.dev/user-centric-performance-metrics/
[url-artilce-2]:https://developers.google.com/web/fundamentals/performance/user-centric-performance-metrics?hl=zh-cn
[url-mdn-1]:https://developer.mozilla.org/en-US/docs/Web/API/Window/load_event
[url-website-1]:https://www.w3.org/webperf/
[url-wiki-1]:https://en.wikipedia.org/wiki/Real_user_monitoring

[url-local-rail]:./images/48/rail.png
